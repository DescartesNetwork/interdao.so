"use strict";(globalThis.webpackChunkinterdao=globalThis.webpackChunkinterdao||[]).push([["src_app_templates_spl-approve_create_tsx"],{15662:(e,t,a)=>{a.d(t,{Jg:()=>u,pC:()=>m,Y2:()=>h});var s=a(92950),n=a(55754),r=a(45055),o=a(94751),i=a(3740),c=a(1055),l=a(45263);const u=e=>{let{id:t,title:a,defaultValue:u,...d}=e;const m=(0,n.useDispatch)(),p=(0,n.useSelector)((e=>e.template.data[t])),{daoAddress:h}=(0,r.useParams)(),g=(0,c.K)(h);(0,s.useEffect)((()=>{u&&void 0===p&&m((0,i.mS)({[t]:u.toString()}))}),[u,m,t,p]);const y=p===(null===g||void 0===g?void 0:g.master.toBase58());return(0,l.jsxs)(o.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[(0,l.jsx)(o.Typography.Text,{type:"secondary",children:a}),(0,l.jsx)(o.Input,{className:"border-less",placeholder:"Input Address",value:p,onChange:e=>m((0,i.mS)({[t]:e.target.value})),prefix:y?(0,l.jsx)(o.Button,{type:"dashed",size:"small",style:{marginLeft:-4,marginRight:2,borderWidth:.5},children:"Master"}):(0,l.jsx)(s.Fragment,{}),...d})]})};var d=a(6942);const m=e=>{let{id:t,title:a}=e;const s=(0,n.useDispatch)(),r=(0,n.useSelector)((e=>e.template.data[t]));return(0,l.jsxs)(o.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[a&&(0,l.jsx)(o.Typography.Text,{type:"secondary",children:a}),(0,l.jsx)(d.Qc,{value:r,onChange:e=>{s((0,i.mS)({[t]:e}))},style:{marginLeft:-7}})]})};var p=a(33968);const h=e=>{let{id:t,title:a,defaultValue:r,...c}=e;const u=(0,n.useDispatch)(),d=(0,n.useSelector)((e=>e.template.data[t]));return(0,s.useEffect)((()=>{r&&void 0===d&&u((0,i.mS)({[t]:r.toString()}))}),[r,u,t,d]),(0,l.jsxs)(o.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[(0,l.jsx)(o.Typography.Text,{type:"secondary",children:a}),(0,l.jsx)(p.Z,{className:"border-less",placeholder:"Input Amount",defaultValue:d,onValue:e=>u((0,i.mS)({[t]:e})),...c})]})}},68522:(e,t,a)=>{a.d(t,{i:()=>r,l:()=>o});var s=a(33804),n=a(40106);let r;!function(e){e.tokenAccount="token-account",e.decimalize="decimalize"}(r||(r={}));const o={[r.tokenAccount]:{call:async e=>s.utils.token.associatedAddress({mint:new s.web3.PublicKey(e.mint),owner:new s.web3.PublicKey(e.owner)})},[r.decimalize]:{call:async e=>{const{splt:t}=window.sentre,a=await t.getMintData(e.mint);return n.default.decimalize(e.amount,a.decimals)}}}},8904:(e,t,a)=>{a.d(t,{h:()=>f});var s=a(92950),n=a(55754),r=a(45055),o=a(86164),i=a(3740),c=a(33804),l=a(71256),u=a(63805),d=a(99503),m=a(80531),p=a(68522);const h="ixname",g=(e,t)=>{switch(t){case"u8":case"u32":return Number(e);case"u64":return new c.BN(e);default:throw new Error("Invalid type of arg: "+t)}},y=async(e,t)=>{const a=await(e=>{const t=new l.Connection(u.f4,{commitment:"confirmed"}),a=new c.AnchorProvider(t,new d.Z,{commitment:"confirmed"});return new c.Program({instructions:[{name:h,accounts:e.accounts,args:e.args}],name:"program-parser",version:"0.0.0"},e.programId,a)})(e),s=await(async(e,t)=>{const a=e.accounts,s={};for(const n of a)if((0,m.tq)(n)){const e=n.rule.configs,a={};for(const s in e)a[s]=t[e[s]];const r=await p.l[n.rule.name].call({...a});s[n.name]=r}else s[n.name]=new l.PublicKey(t[n.name]);return s})(e,t),n=await(async(e,t)=>{const a=[];for(const s of e.args){let e=t[s.name];if((0,m.ny)(s)){const a=s.rule.configs,n={};for(const e in a)n[e]=t[a[e]];e=await p.l[s.rule.name].call({...n})}a.push(g(e,s.type))}return a})(e,t),r=await a.methods.ixname.call(void 0,...n).accounts(s).instruction();return r.data=r.data.slice(8,r.data.length),r},{manifest:{appId:w}}=o.Z,f=()=>{const e=(0,n.useDispatch)(),t=(0,r.useHistory)(),{daoAddress:a}=(0,r.useParams)();return{confirm:(0,s.useCallback)((async(s,n)=>{const r=await y(s,n),o=await((e,t)=>{const a={};for(let s=0;s<e.accounts.length;s++){const n=e.accounts[s];a[n.name]={isMaster:n.isMaster,isSigner:n.isSigner,isWritable:n.isMut,pubkey:t.keys[s].pubkey}}return{name:e.name,data:t.data,accounts:a,programId:new l.PublicKey(e.programId)}})(s,r);return await e((0,i.St)(s.name)),await e((0,i.Rm)(o)),await e((0,i.yx)(!1)),await e((0,i.mS)(n)),t.push(`/app/${w}/dao/${a}/new-proposal`)}),[a,e,t]),close:(0,s.useCallback)((async()=>{await e((0,i.JJ)())}),[e])}}},50067:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(92950),n=a(55754),r=a(77817),o=a(94751),i=a(15662),c=a(33804),l=a(68522),u=a(80531);let d;!function(e){e.source="source",e.delegate="delegate",e.authority="authority",e.code="code",e.amount="amount",e.mint="mint"}(d||(d={}));const m={name:u.sR.SplApprove,accounts:[{name:d.source,isMut:!0,isSigner:!1,isMaster:!1,rule:{name:l.i.tokenAccount,configs:{mint:d.mint,owner:d.source}}},{name:d.delegate,isMut:!0,isSigner:!1,isMaster:!1,rule:{name:l.i.tokenAccount,configs:{mint:d.mint,owner:d.source}}},{name:d.authority,isMut:!0,isSigner:!0,isMaster:!0}],args:[{name:d.code,type:"u8"},{name:d.amount,type:"u64",rule:{name:l.i.decimalize,configs:{amount:d.amount,mint:d.mint}}}],programId:c.utils.token.TOKEN_PROGRAM_ID.toBase58()};var p=a(8904),h=a(45263);const g=e=>{let{daoAddress:t=""}=e;const a=(0,n.useSelector)((e=>e.daos[t])),c=(0,n.useSelector)((e=>e.template.data)),{confirm:l,close:u}=(0,p.h)(),g=(0,s.useCallback)((async()=>{const e={[d.code]:"4",[d.source]:a.master.toBase58(),[d.authority]:a.master.toBase58()};return l(m,{...e,...c})}),[l,a.master,c]),y=!c[d.amount]||!(0,r.isAddress)(c[d.delegate])||!c[d.mint];return(0,h.jsxs)(o.Row,{gutter:[24,24],children:[(0,h.jsx)(o.Col,{span:24,children:(0,h.jsx)(i.Y2,{id:d.amount,title:"Amount",prefix:(0,h.jsx)(i.pC,{id:d.mint})})}),(0,h.jsx)(o.Col,{span:24,children:(0,h.jsx)(i.Jg,{id:d.source,defaultValue:a.master.toBase58(),title:"Source's Wallet Address",placeholder:"Input Source's Wallet Address",readOnly:!0})}),(0,h.jsx)(o.Col,{span:24,children:(0,h.jsx)(i.Jg,{id:d.delegate,title:"Delegate's Wallet Address",placeholder:"Input Delegate's Wallet Address"})}),(0,h.jsx)(o.Col,{span:24}),(0,h.jsx)(o.Col,{span:24,style:{textAlign:"right"},children:(0,h.jsxs)(o.Space,{children:[(0,h.jsx)(o.Button,{type:"text",onClick:u,children:"Close"}),(0,h.jsx)(o.Button,{type:"primary",onClick:g,disabled:y,children:"Continue"})]})})]})}}}]);
//# sourceMappingURL=src_app_templates_spl-approve_create_tsx.0b86a1cf.chunk.js.map