"use strict";(globalThis.webpackChunkinter_dao=globalThis.webpackChunkinter_dao||[]).push([["src_templates_view_sen-farming-stake_create_tsx"],{25827:(e,a,t)=>{t.d(a,{U:()=>g,Z:()=>h});var n=t(92950),s=t(32671),r=t(45055),i=t(22734),l=t(45263);const d=e=>{let{id:a,defaultValue:t,value:d,handleChange:o,disabled:c}=e;const{daoAddress:m}=(0,r.useParams)(),u=(0,i.K)(m);(0,n.useEffect)((()=>{t&&o(a,t)}),[t,a,o]);const p=d===(null===u||void 0===u?void 0:u.master.toBase58());return(0,l.jsx)(s.Input,{className:"border-less",placeholder:"Input Address",value:d,onChange:e=>o(a,e.target.value),readOnly:c,prefix:p?(0,l.jsx)(s.Button,{type:"dashed",size:"small",style:{marginLeft:-4,marginRight:2,borderWidth:.5},children:"Master"}):(0,l.jsx)(n.Fragment,{})})};var o=t(33968);const c=e=>{let{id:a,value:t,handleChange:s,defaultValue:r,disabled:i,...d}=e;return(0,n.useEffect)((()=>{r&&s(a,r)}),[r,a,s]),(0,l.jsx)(o.Z,{className:"border-less",placeholder:"Input Amount",value:t,onValue:e=>s(a,e),...d,disabled:!1,readOnly:i})};var m=t(39295);const u=e=>{let{id:a,value:t,handleChange:s,defaultValue:r,disabled:i}=e;return(0,n.useEffect)((()=>{r&&s(a,r)}),[r,a,s]),(0,l.jsx)(m.Z,{disabled:i,value:t,onChange:e=>s(a,e),style:{marginLeft:-7}})},p=e=>{let{configs:a,templateData:t,onChange:s}=e;const{id:r,prefix:i,type:o,disabled:m}=a,h=t[r],g=(0,n.useMemo)((()=>{if(i)return(0,l.jsx)(p,{configs:{...i,disabled:m},onChange:s,templateData:t})}),[m,s,i,t]),f=(0,n.useMemo)((()=>({handleChange:s,prefix:g,id:r,value:h,disabled:m})),[m,r,s,g,h]);return"number"===o?(0,l.jsx)(c,{...f}):"mint-select"===o?(0,l.jsx)(u,{...f}):"address"===o?(0,l.jsx)(d,{...f}):null},h=e=>{let{onChange:a,components:t,templateData:r}=e;const i=(0,n.useCallback)(((e,t)=>{a({...r,[e]:t})}),[a,r]);return(0,l.jsx)(s.Row,{gutter:[24,24],children:t.map((e=>(0,l.jsx)(s.Col,{span:24,children:(0,l.jsxs)(s.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[e.title&&(0,l.jsx)(s.Typography.Text,{type:"secondary",children:e.title}),(0,l.jsx)(p,{configs:e,onChange:i,templateData:r})]})},e.id)))})},g=e=>{let{components:a,templateData:t}=e;return(0,l.jsx)(s.Row,{gutter:[24,24],children:a.map((e=>(0,l.jsx)(s.Col,{span:24,children:(0,l.jsxs)(s.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[e.title&&(0,l.jsx)(s.Typography.Text,{type:"secondary",children:e.title}),(0,l.jsx)(p,{configs:{...e,disabled:!0},onChange:()=>{},templateData:t})]})},e.id)))})}},329:(e,a,t)=>{t.d(a,{h:()=>o});var n=t(45055),s=t(92950),r=t(55754),i=t(50794),l=t(62919),d=t(79621);const o=()=>{const e=(0,r.useDispatch)(),a=(0,n.useHistory)();return{confirm:(0,s.useCallback)((async(t,n,s,r)=>{const o=i.web3.Keypair.generate().publicKey,c={templateConfig:n,templateData:s,serializedTxs:r.map((e=>(e.recentBlockhash=o.toBase58(),e.feePayer=o,e.serialize({requireAllSignatures:!1}).toString("base64")))),daoAddress:t};await e((0,l.vr)(c)),a.push(d.z.createProposal.generatePath({}))}),[e,a]),close:(0,s.useCallback)((async()=>{await e((0,l.JJ)())}),[e])}}},57511:(e,a,t)=>{t.d(a,{U6:()=>n,aK:()=>s});const n={name:t(96706).s.SenFarmingStake,title:"Sen/Farming Stake",components:[{title:"Farm Address",type:"address",id:"farm"},{title:"Amount",type:"number",id:"amount",prefix:{id:"mint",type:"mint-select",disabled:!0}}]},s={devnet:{senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx"},testnet:{senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx"},mainnet:{senFarmingProgram:"E6Vc9wipgm8fMXHEYwgN7gYdDbyvpPBUiTNy67zPKuF4"}}},36604:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var n=t(92950),s=t(65284),r=t(50794),i=t(18863),l=t(32671),d=t(25827),o=t(57511),c=t(329),m=t(22734),u=t(51845),p=t(4065),h=t(68321),g=t.n(h);var f=t(45263);const x=e=>{let{daoAddress:a="",defaultData:t}=e;const h=(0,m.K)(a),[x,b]=(0,s.Z)(t||{amount:"",mint:"",farm:""}),{confirm:w,close:y}=(0,c.h)(),{getSenFarming:C,stake:v}=(()=>{const e=(0,i.useGetMintDecimals)(),a=(0,n.useCallback)((e=>{const a=o.aK[i.net].senFarmingProgram,t=(0,i.getAnchorProvider)({...window.sentre.solana,publicKey:e});return new(g())(t,a)}),[]);return{stake:(0,n.useCallback)((async t=>{let{inAmount:n,farm:s,walletPublicKey:i}=t;const l=a(i),d=await l.program.account.farm.fetch(s),o=await l.deriveAllPDAs({farm:s}),c=await e({mintAddress:d.inputMint.toBase58()});let m=null;try{m=await l.program.account.debt.fetch(o.debt)}catch(A){}const u=[],h=m?m.shares:new r.BN(0),g=m?m.leverage:new r.BN(1);if(!m){const{tx:e}=await l.initializeDebt({farm:s,sendAndConfirm:!1});u.push(e)}const f=new r.web3.Transaction,{tx:x}=await l.unstake({farm:s,sendAndConfirm:!1}),{tx:b}=await l.withdraw({farm:s,shares:h,sendAndConfirm:!1});f.add(x),f.add(b);const w=p.utilsBN.decimalize(n,c),y=h.mul(new r.BN(10**9)).div(g),C=new r.web3.Transaction,{tx:v}=await l.deposit({farm:s,inAmount:w.add(y),sendAndConfirm:!1}),{tx:j}=await l.stake({farm:s,sendAndConfirm:!1});return C.add(v),C.add(j),u.push(C),u}),[e,a]),getSenFarming:a}})(),j=(0,n.useCallback)((async()=>{if(!i.util.isAddress(x.farm))return;const e=C(null===h||void 0===h?void 0:h.master),a=await e.program.account.farm.fetch(x.farm);b({mint:a.inputMint.toBase58()})}),[null===h||void 0===h?void 0:h.master,x.farm,C,b]);(0,n.useEffect)((()=>{j()}),[j]);return(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(d.Z,{templateData:x,components:o.U6.components,onChange:b})}),(0,f.jsx)(l.Col,{span:24}),(0,f.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Button,{type:"text",onClick:y,children:"Close"}),(0,f.jsx)(l.Button,{type:"primary",onClick:async()=>{try{const e=await v({inAmount:Number(x.amount),farm:new r.web3.PublicKey(x.farm),walletPublicKey:null===h||void 0===h?void 0:h.master});return w(a,o.U6,x,e)}catch(e){(0,u.cB)(e)}},children:"Continue"})]})})]})}}}]);
//# sourceMappingURL=src_templates_view_sen-farming-stake_create_tsx.3ddcc477.chunk.js.map