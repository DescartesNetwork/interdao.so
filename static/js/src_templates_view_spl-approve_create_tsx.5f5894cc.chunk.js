"use strict";(globalThis.webpackChunkinter_dao=globalThis.webpackChunkinter_dao||[]).push([["src_templates_view_spl-approve_create_tsx"],{25827:(e,t,a)=>{a.d(t,{U:()=>v,Z:()=>m});var s=a(92950),n=a(32671),i=a(45055),l=a(22734),r=a(45263);const o=e=>{let{id:t,defaultValue:a,value:o,handleChange:d,disabled:c}=e;const{daoAddress:u}=(0,i.useParams)(),p=(0,l.K)(u);(0,s.useEffect)((()=>{a&&d(t,a)}),[a,t,d]);const h=o===(null===p||void 0===p?void 0:p.master.toBase58());return(0,r.jsx)(n.Input,{className:"border-less",placeholder:"Input Address",value:o,onChange:e=>d(t,e.target.value),readOnly:c,prefix:h?(0,r.jsx)(n.Button,{type:"dashed",size:"small",style:{marginLeft:-4,marginRight:2,borderWidth:.5},children:"Master"}):(0,r.jsx)(s.Fragment,{})})};var d=a(33968);const c=e=>{let{id:t,value:a,handleChange:n,defaultValue:i,disabled:l,...o}=e;return(0,s.useEffect)((()=>{i&&n(t,i)}),[i,t,n]),(0,r.jsx)(d.Z,{className:"border-less",placeholder:"Input Amount",value:a,onValue:e=>n(t,e),...o,disabled:!1,readOnly:l})};var u=a(39295);const p=e=>{let{id:t,value:a,handleChange:n,defaultValue:i,disabled:l}=e;return(0,s.useEffect)((()=>{i&&n(t,i)}),[i,t,n]),(0,r.jsx)(u.Z,{disabled:l,value:a,onChange:e=>n(t,e),style:{marginLeft:-7}})},h=e=>{let{configs:t,templateData:a,onChange:n}=e;const{id:i,prefix:l,type:d,disabled:u}=t,m=a[i],v=(0,s.useMemo)((()=>{if(l)return(0,r.jsx)(h,{configs:{...l,disabled:u},onChange:n,templateData:a})}),[u,n,l,a]),g=(0,s.useMemo)((()=>({handleChange:n,prefix:v,id:i,value:m,disabled:u})),[u,i,n,v,m]);return"number"===d?(0,r.jsx)(c,{...g}):"mint-select"===d?(0,r.jsx)(p,{...g}):"address"===d?(0,r.jsx)(o,{...g}):null},m=e=>{let{onChange:t,components:a,templateData:i}=e;const l=(0,s.useCallback)(((e,a)=>{t({...i,[e]:a})}),[t,i]);return(0,r.jsx)(n.Row,{gutter:[24,24],children:a.map((e=>(0,r.jsx)(n.Col,{span:24,children:(0,r.jsxs)(n.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[e.title&&(0,r.jsx)(n.Typography.Text,{type:"secondary",children:e.title}),(0,r.jsx)(h,{configs:e,onChange:l,templateData:i})]})},e.id)))})},v=e=>{let{components:t,templateData:a}=e;return(0,r.jsx)(n.Row,{gutter:[24,24],children:t.map((e=>(0,r.jsx)(n.Col,{span:24,children:(0,r.jsxs)(n.Space,{direction:"vertical",size:4,style:{width:"100%"},children:[e.title&&(0,r.jsx)(n.Typography.Text,{type:"secondary",children:e.title}),(0,r.jsx)(h,{configs:{...e,disabled:!0},onChange:()=>{},templateData:a})]})},e.id)))})}},329:(e,t,a)=>{a.d(t,{h:()=>d});var s=a(45055),n=a(92950),i=a(55754),l=a(50794),r=a(62919),o=a(79621);const d=()=>{const e=(0,i.useDispatch)(),t=(0,s.useHistory)();return{confirm:(0,n.useCallback)((async(a,s,n,i)=>{const d=l.web3.Keypair.generate().publicKey,c={templateConfig:s,templateData:n,serializedTxs:i.map((e=>(e.recentBlockhash=d.toBase58(),e.feePayer=d,e.serialize({requireAllSignatures:!1}).toString("base64")))),daoAddress:a};await e((0,r.vr)(c)),t.push(o.z.createProposal.generatePath({}))}),[e,t]),close:(0,n.useCallback)((async()=>{await e((0,r.JJ)())}),[e])}}},21687:(e,t,a)=>{a.d(t,{M:()=>s});const s=new(a(50794).web3.PublicKey)("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA")},31764:(e,t,a)=>{a.d(t,{f:()=>s});const s={name:a(96706).s.SplApprove,title:"SPL/Approve",components:[{id:"viewAmount",type:"number",title:"Amount",prefix:{id:"viewMint",type:"mint-select"}},{id:"viewSource",type:"address",title:"Source",disabled:!0},{id:"viewDelegate",type:"address",title:"Delegate"}]}},90664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(65284),n=a(50794),i=a(93038),l=a(18863),r=a(4065),o=a(32671),d=a(25827),c=a(31764),u=a(329),p=a(21687),h=a(22734),m=a(45263);const v=e=>{let{daoAddress:t="",defaultData:a}=e;const v=(0,h.K)(t),[g,b]=(0,s.Z)(a||{viewAmount:"",viewDelegate:"",viewMint:"",viewSource:null===v||void 0===v?void 0:v.master.toBase58()}),{confirm:w,close:x}=(0,u.h)(),y=(0,l.useGetMintDecimals)();return(0,m.jsxs)(o.Row,{gutter:[24,24],children:[(0,m.jsx)(o.Col,{span:24,children:(0,m.jsx)(d.Z,{templateData:g,components:c.f.components,onChange:b})}),(0,m.jsx)(o.Col,{span:24}),(0,m.jsx)(o.Col,{span:24,style:{textAlign:"right"},children:(0,m.jsxs)(o.Space,{children:[(0,m.jsx)(o.Button,{type:"text",onClick:x,children:"Close"}),(0,m.jsx)(o.Button,{type:"primary",onClick:async()=>{const e=await n.utils.token.associatedAddress({owner:new n.web3.PublicKey(g.viewSource),mint:new n.web3.PublicKey(g.viewMint)}),a=await y({mintAddress:g.viewMint}),s=r.utilsBN.decimalize(g.viewAmount,a),l=(new n.web3.Transaction).add(i.Token.createApproveInstruction(p.M,e,new n.web3.PublicKey(g.viewDelegate),new n.web3.PublicKey(g.viewSource),[],s.toNumber()));return w(t,c.f,g,[l])},children:"Continue"})]})})]})}},65284:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(92950);const n=function(e){void 0===e&&(e={});var t=(0,s.useState)(e),a=t[0],n=t[1];return[a,(0,s.useCallback)((function(e){n((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]}}}]);
//# sourceMappingURL=src_templates_view_spl-approve_create_tsx.5f5894cc.chunk.js.map